# 컨테이너 로깅

## json-file 로그 사용하기
- 컨테이너 내부에서 어떤일이 발생하는지 아는 것은 디버깅 및 운영 측면에서 중요합니다. 
- 도커는 별도의 로깅 서비스를 쓸수 있지만, 컨테이너 표준 출력과 에러 로그를 별도의 메타데이터 파일로 저장하여 이를 확인하는 명령어를 제공합니다.
- 도커에서 제공하는 log명령어를 통해 컨테이너 내부에서 bash 셸 등을 입출력한 내용을 확인할 수 있다.
- 컨테이너 로그들은 JSON형태로 도커 내부에 저장됩니다. 내부 출력이 많아지면 로그 파일 크기가 증가함으로 로그 파일 최대 크기나 파일 개수를 지정해야합니다.
- 명령어
    - [docker log [컨테이너명]] : 컨테이너의 표준 출력을 확인할 수 있다.
        - [docker log --tail [줄수] [컨테이너명]] : 리눅스의 tail 명령어랑 비슷하다.
        - [docker log --since [유닉스시간] [컨테이너명]] : 특정 시간이후 로그를 확인 할 수 있다
        - [docker log -t [컨테이너명]] : 타임스탬프 표시
        - [docker log -f [컨테이너명]] : 로그를 스트림으로 확인이 가능하다
    - [docker run -it --log-opt max-size=10k --name ...] : 로그 파일 최대 크기
    - [docker run -it --log-opt max-file=3 --name ...] : 로그 파일 개수

## syslog 로그 사용하기
- syslog는 유닉스 계열 운영체제에서 로그를 수집하는 오래된 표준 중하나로, 커널, 보안 등 시스템과 관련된 로그, 애플리케이션의 로그 등 다양한 종류의 로그를 수집해 저장합니다.
- 대부분 유닉스계열 운영체제에서는 syslog를 사용하는 인터페이스가 동일하기에 체계적으로 로그를 수집하고 분석할 수 있는 장점이 있습니다.
- 명령어 
    - [docker run -d --name syslog_container --log-driver=syslog ...] : syslog 로깅 드라이버는 로컬 호스트의 syslog에 저장한다.
- syslog를 원격 서버에 설치하면 로그 옵션을 추가해 로그 정보를 원격 서버로 보낼수가 있다. (rsyslog를 이용하면 된다) 

## 기타
- 기타 fluentd, AWS CloudWatch log 등이 존재한다.